<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="偕臧"><meta name="copyright" content="偕臧"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>三十分钟学会Git（写的挺好的一篇） | 偕臧</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.24/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"ifmet.cn","root":"/","title":"偕臧的小站","version":"1.5.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="偕臧" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-160972149-1"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-160972149-1');
}</script><meta name="description" content="简介：  三十分钟学会Git（写的挺好的一篇）">
<meta property="og:type" content="article">
<meta property="og:title" content="三十分钟学会Git（写的挺好的一篇）">
<meta property="og:url" content="https://ifmet.cn/posts/fd870c38/index.html">
<meta property="og:site_name" content="偕臧">
<meta property="og:description" content="简介：  三十分钟学会Git（写的挺好的一篇）">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225608.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225706.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225727.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225819.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225843.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225901.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225940.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730230003.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730230022.png">
<meta property="og:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190719175818.png">
<meta property="article:published_time" content="2019-07-30T22:46:23.000Z">
<meta property="article:modified_time" content="2019-07-30T22:46:23.000Z">
<meta property="article:author" content="偕臧">
<meta property="article:tag" content="偕臧, xmuli, c++, Qt, 哲学">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225608.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="偕臧"><img width="96" loading="lazy" src="/xmuli.png" alt="偕臧"><span class="site-author-status" title="一片四叶幸运草">🍀</span></a><div class="site-author-name"><a href="/about/">偕臧</a></div><a class="site-name" href="/about/site.html">偕臧</a><sub class="site-subtitle"></sub><div class="site-desciption">看待世界始终保持着好奇</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">245</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">25</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">29</span></a></div><a class="site-state-item hty-icon-button" href="https://ifmet.cn/about" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://sighttp.qq.com/authd?IDKEY=31f3ef7312b39e2c8dc822ae2f4c3b3118e1a6f31cc83373" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/xmuli" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:xmulitech@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/106940738" title="哔哩哔哩动画" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/xmulite" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/xmuli" title="Telegram" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://xmuli.blog.csdn.net" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="友链直达" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a><a class="links-item hty-icon-button" href="/learn/" title="学习他人" style="color:Pink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-heart-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E8%BD%BD%E5%8E%9F%E6%96%87%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">转载原文：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E5%8D%9A%E6%96%87%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">参考博文：</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://ifmet.cn/posts/fd870c38/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="偕臧"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="偕臧"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">三十分钟学会Git（写的挺好的一篇）<a class="post-edit-link" href="https://github.com/xmuli/xmuliMark/tree/master/source/_posts/三十分钟学会Git（写的挺好的一篇）.md" target="_blank" title="编辑" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2019-07-30 22:46:23" itemprop="dateCreated datePublished" datetime="2019-07-30T22:46:23+00:00">2019-07-30</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="本文字数">6.2k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="阅读时长">26m</span></span></span><span class="leancloud_visitors" id="/posts/fd870c38/" data-flag-title="三十分钟学会Git（写的挺好的一篇）"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/%E5%AD%A6%E4%B9%A0-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%EF%BC%8C%E8%BE%85%E5%8A%A9%E6%8A%80%E5%B7%A7/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">学习 - 编码规范，辅助技巧</span></a></span> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/%E5%AD%A6%E4%B9%A0-Git/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">学习 - Git</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><p><strong>简介：</strong>  三十分钟学会Git（写的挺好的一篇）</p>
<span id="more"></span>

<p>[TOC]</p>
<br>

<blockquote>
<p><font color=#D0087E size=4 face="STFangsong">本文初发于 <strong>“偕臧的小站”</strong>  <a href="https://ifmet.cn/">ifmet.cn</a>，同步转载于此。</font></p>
</blockquote>
<br>

<h2 id="转载原文："><a href="#转载原文：" class="headerlink" title="转载原文："></a>转载原文：</h2><blockquote>
<p>第一步：首先我们了解下下面几个概念（Git本质上是保存文件的工具）：</p>
</blockquote>
<ol>
<li><p>Git保存的文件对应4个状态:</p>
<p>  【Untracked】：没有加入Git管理的文件；</p>
<p>  【Unmodified】：已经提交文件（即已经存在于Git仓库中文件）；</p>
<p>  【Modified】：已经存在于Git仓库的文件，后面做了修改但是没有提交；</p>
<p>  【Staged】：存在于Git暂存区，待提交的文件</p>
</li>
</ol>
<p>​    </p>
<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225608.png"/ loading="lazy">


<p>​    </p>
<ul>
<li><p><strong>这4个状态分别被放在3个区域中</strong><br>   1.【工作目录（Working Directory）】：PC上的一个目录，存放从 Git 仓库的压缩数据库中提取出来的文件，存放的文件状态Unmodified、Modified、Untracked<br>   2.【暂存区域（Staging Area）】：保存了下次提交的文件列表信息，文件状态：Staged<br>   3.【Git仓库目录（Local Repository）】：Git 用来保存项目的元数据和对象数据库的地方(存在于工作目录下的隐藏文件夹[.git]，备份这个文件夹即可备份整个仓库)，文件状态：Unmodified</p>
</li>
<li><p>上面3个区域在Git中被抽象成3棵树对象</p>
<p>   Working Directory：记录整个工作目录的文件树结构</p>
<p>   Index：预期的下一次提交的快照</p>
<p>   HEAD：上一次提交的快照，下一次提交的父结点</p>
</li>
</ul>
<p>​    <img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225706.png"/ loading="lazy"></p>
<p>​    </p>
<ol>
<li>SHA-1</li>
</ol>
<ul>
<li>Git的每一次commit对会产生一个SHA-1值（一个40个字符的字符串），这个SHA-1可以理解为这次commit的别名。<br>   通常我们使用SHA-1时无需全部字符，只需要前几个字符（大于4个并且没有歧义）来表示某一个commit版本。</li>
<li>显示简短、无歧义的SHA-1(默认是7个字符)</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">git log <span class="token operator">--</span>abbrev<span class="token operator">-</span>commit <span class="token operator">--</span>pretty<span class="token operator">=</span>oneline<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>查看某个commit，下面三个命令是等价的：</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git show <span class="token number">1</span>c002dd4b536e7479fe34593e72e6c6c1819e53b
$ git show <span class="token number">1</span>c002dd4b536e7479f
$ git show <span class="token number">1</span>c002d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>获取master分支现在指向的那个SHA-1</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">git rev<span class="token operator">-</span>parse master
<span class="token number">904</span>dc9362ece4c8659af08d3568d39f68d9687d6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>祖先引用 <ul>
<li>引用的尾部加上一个 ^或者，表示为该引用的上一个提交HEAD 和 HEAD^ 是等价指向上一个提交；</li>
<li>实例详解：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/abed5bb454dc">戳我</a> </li>
</ul>
</li>
</ul>
<blockquote>
<p>第二步：下面详解文件怎么在Git命令中运转</p>
</blockquote>
<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225727.png"/ loading="lazy">



<hr>
<ul>
<li>【clone】：把远程仓库克隆到工作目录</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 在目录下自动创建hello文件夹，并且克隆代码到hello文件夹
    $ git clone https<span class="token operator">:</span><span class="token comment">//github.com/fanlehai/hello.git</span>
    $ git clone git<span class="token operator">:</span><span class="token comment">//github.com/fanlehai/hello.git</span>
# 自定义文件夹克隆
    $ git clone https<span class="token operator">:</span><span class="token comment">//github.com/fanlehai/hello.git hello-code</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【init】：在本地目录创建仓库</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 打开terminal，输入下面命令<span class="token operator">:</span>
    $ mkdir hello
    $ cd hello
    $ git init<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【add】：文件加入到暂存区(新增和修改文件用此命令) <ul>
<li>【实例1】新增README.md，添加到暂存区，再提交到本地仓库</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ cd hello
$ echo <span class="token string">"# test"</span> <span class="token operator">>></span> README<span class="token punctuation">.</span>md
$ git add README<span class="token punctuation">.</span>md
$ git commit <span class="token operator">-</span>m <span class="token string">"add README.md"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【实例2】：批量增加文件</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 增加test文件夹下所有文件
$ git add test<span class="token comment">/*
# 增加test文件夹下所有后缀为.log的文件
$ git add test/*.log</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>【实例3】：对一个文件多处修改，进行分批提交：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/942f1fb3a182">戳我</a> </p>
</li>
<li><p>【mv】：移动或重命名文件、目录、符号链接 </p>
<ul>
<li>【实例1】文件移入到新建文件夹并且提交</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token operator">*</span>下面两个方法实现的效果完全相同
# 方法<span class="token number">1</span>：
      $ mkdir lib
      $ git mv hello<span class="token punctuation">.</span>html lib
      $ git commit <span class="token operator">-</span>m <span class="token string">"Moved hello.html to lib"</span>
# 方法<span class="token number">2</span>：
      $ mkdir lib
      $ mv hello<span class="token punctuation">.</span>html lib
      $ git add lib<span class="token operator">/</span>hello<span class="token punctuation">.</span>html
      $ git rm hello<span class="token punctuation">.</span>html
      $ git commit <span class="token operator">-</span>m <span class="token string">"Moved hello.html to lib"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【实例2】修改文件名</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 修改文件名README<span class="token punctuation">.</span>md<span class="token operator">--</span><span class="token operator">></span> README
      $ git mv README<span class="token punctuation">.</span>md README
# 上面这句等下下面<span class="token number">3</span>句命令
      $ mv README<span class="token punctuation">.</span>md README
      $ git rm README<span class="token punctuation">.</span>md
      $ git add README<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【rm】：删除文件 <ul>
<li>实例如下：</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token number">1.</span>删除文件
      $ git rm hello<span class="token punctuation">.</span>html
      $ git commit <span class="token operator">-</span>m <span class="token string">"delete hello.html"</span>
<span class="token number">2.</span>如果文件被修改过，而且被<span class="token punctuation">(</span>git add<span class="token punctuation">)</span>到暂存区<span class="token punctuation">,</span>用<span class="token operator">-</span>f强制删除
      $ git rm <span class="token operator">-</span>f hello<span class="token punctuation">.</span>html
<span class="token number">3.</span>把文件从暂存区中删除，但是保留在磁盘（变成Untracked状态）
     【使用场景】：当你忘记添加 <span class="token punctuation">.</span>gitignore文件，不小心把一个很大的日志文件或一堆 <span class="token punctuation">.</span>a
        这样的编译生成文件添加到暂存区时
      <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">a</span><span class="token expression"><span class="token punctuation">.</span> 删除暂存区中的README文件</span></span>
        $ git rm <span class="token operator">--</span>cached README
      <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">b</span><span class="token expression"><span class="token punctuation">.</span> 不小心test文件夹下所有文件加入暂存区，吧文件从暂存区移除，但不从硬盘上删除</span></span>
        $ git add test<span class="token comment">/*
        $ git rm --cached test/*
4.批量删除
      #删除log目录下所有.log后缀的文件
      $ git rm log/*.log
      #删除所有文件名以~结尾的文件
      $ git rm *~</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>reset：回滚版本、撤销暂存区文件 <ul>
<li>撤销暂存区文件</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 撤销暂存区文件file<span class="token punctuation">.</span><span class="token function">txt</span><span class="token punctuation">(</span>其实就是把HEAD版本的file<span class="token punctuation">.</span>txt文件恢复到暂存区<span class="token punctuation">)</span>
      $ git reset HEAD file<span class="token punctuation">.</span>txt
# 撤销暂存区文件<span class="token punctuation">(</span>filename可能会跟分支名相同，所以用<span class="token operator">--</span>来表示后面是路径或者文件<span class="token punctuation">)</span>
      $ git reset HEAD <span class="token operator">--</span> filename
# 把指定版本<span class="token punctuation">(</span>eb43bf<span class="token punctuation">)</span>的文件恢复到暂存区
      $ git reset eb43bf file<span class="token punctuation">.</span>txt
# 根据上个命令显示的commit对应的值回滚
      $ git reset <span class="token operator">--</span>hard <span class="token operator">&lt;</span>commit<span class="token operator">></span>
# <span class="token operator">--</span>hard表示删除工作区的所有在commit版本后的改动<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>对于版本提交撤销</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 恢复工作区<span class="token punctuation">(</span>同步缺少的文件，对于已经修改的文件只尝试把仓库中版本合并到本地，保留本地修改<span class="token punctuation">)</span>
      $ git reset  HEAD
# 恢复工作区（把本地修改的文件全部从硬盘删除，同步成仓库中版本）
      $ git reset <span class="token operator">--</span>hard HEAD<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>更多reset实例：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/77bc8781289e">戳我</a> </li>
<li>【git reset –hard HEAD~】命令包含三个步骤：</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token number">1.</span>移动 HEAD 分支的指向上一个版本<span class="token punctuation">(</span>HEAD<span class="token operator">~</span><span class="token punctuation">)</span>
<span class="token number">2.</span>使索引看起来像现在的HEAD
<span class="token number">3.</span>使工作目录看起来像索引
##补充说明
      $ git reset <span class="token operator">--</span>soft HEAD<span class="token operator">~</span> 这个命令执行上面<span class="token number">1</span>【图reset <span class="token number">2</span>】
      $ git reset <span class="token operator">--</span>mixed HEAD<span class="token operator">~</span>这个命令执行上面<span class="token number">1</span>，<span class="token number">2</span>【图reset <span class="token number">3</span>】
      $ git reset <span class="token operator">--</span>hard HEAD<span class="token operator">~</span>这个命令执行上面<span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>【图reset <span class="token number">4</span>】
【<span class="token operator">--</span>mixed】是reset默认行为
      $ git reset HEAD<span class="token operator">~</span> <span class="token operator">==</span> $ git reset <span class="token operator">--</span>mixed HEAD<span class="token operator">~</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225819.png"/ loading="lazy">

<p>reset 1</p>
<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225843.png"/ loading="lazy">

<p>reset 2</p>
<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225901.png"/ loading="lazy">

<p>reset 3</p>
<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730225940.png"/ loading="lazy">

<p>reset 4</p>
<ul>
<li>reset与revert区别：</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token number">1.</span>reset撤销指定版本后所有提交；
<span class="token number">2.</span>revert撤销指定版本的提交；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li><p>reset与checkout区别：如下表格 </p>
<ul>
<li><p>“REF” 表示该命令移动了 HEAD 指向的分支引用，而“HEAD” 则表示只移动了 HEAD 自身;</p>
</li>
<li><p>“WD Safe?” 表示命令是否影响工作区未提交文件（NO表示有影响）</p>
</li>
<li><p>git checkout HEAD 和 git reset –hard HEAD </p>
<ul>
<li>checkout不改变工作区已经修改的文件;reset –hard则不做检查就全面地替换工作目录；</li>
<li>checkout只移动 HEAD自身来指向另一个分支;reset会移动 HEAD和自身分支的指向；</li>
</ul>
</li>
<li><p>git checkout – file.txt等价于git reset –hard file.txt放弃对file.txt的所有修改，恢复成仓库中版本</p>
  <img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730230003.png"/ loading="lazy">

</li>
</ul>
</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">HEAD</th>
<th align="left">Index</th>
<th align="left">Workdir</th>
<th align="left">WD Safe?</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Commit Level</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">reset –soft [commit]</td>
<td align="left">REF</td>
<td align="left">NO</td>
<td align="left">NO</td>
<td align="left">YES</td>
</tr>
<tr>
<td align="left">reset [commit]</td>
<td align="left">REF</td>
<td align="left">YES</td>
<td align="left">NO</td>
<td align="left">YES</td>
</tr>
<tr>
<td align="left">reset –hard [commit]</td>
<td align="left">REF</td>
<td align="left">YES</td>
<td align="left">YES</td>
<td align="left"><strong>NO</strong></td>
</tr>
<tr>
<td align="left">checkout [commit]</td>
<td align="left">HEAD</td>
<td align="left">YES</td>
<td align="left">YES</td>
<td align="left">YES</td>
</tr>
<tr>
<td align="left"><strong>File Level</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">reset (commit) [file]</td>
<td align="left">NO</td>
<td align="left">YES</td>
<td align="left">NO</td>
<td align="left">YES</td>
</tr>
<tr>
<td align="left">checkout (commit) [file]</td>
<td align="left">NO</td>
<td align="left">YES</td>
<td align="left">YES</td>
<td align="left"><strong>NO</strong></td>
</tr>
</tbody></table>
</blockquote>
<ul>
<li>【revert】：撤销指定的提交版本<br>   git revert命令本质上就是一个逆向的 git cherry-pick操作。 它将你提交中的变更的以完全相反的方式的应用到一个新创建的提交中，本质上就是撤销或者倒转。</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 撤销当前版本提交内容，这里会跳出编辑器让你修改commit内容
    $ git revert HEAD
# 撤销当前版本提交内容，直接撤销不会跳出编辑器
    $ git revert HEAD <span class="token operator">--</span>no<span class="token operator">-</span>edit
# 撤销指定版本<span class="token punctuation">,</span>commit是提交版本的SHA<span class="token operator">-</span><span class="token number">1</span>，注意撤销老版本可能会引起文件冲突
    $ git revert <span class="token operator">&lt;</span>commit<span class="token operator">></span> <span class="token operator">--</span>no<span class="token operator">-</span>edit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【branch】：分支<ul>
<li>分支详解：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/893f159e28b0">戳我</a> </li>
</ul>
</li>
<li>【checkout】：切换分支或者恢复文件</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token number">1.</span>切换分支
    $ git checkout <span class="token operator">&lt;</span>branch name<span class="token operator">></span>
<span class="token number">2.</span>修复工作目录下的文件，使得跟仓库文件同步
    $ git checkout  <span class="token operator">&lt;</span>filename<span class="token operator">></span>
<span class="token number">3.</span>如果<span class="token number">1</span>中<span class="token operator">&lt;</span>branch name<span class="token operator">></span>和<span class="token number">2</span>中<span class="token operator">&lt;</span>filename<span class="token operator">></span>相同，调用上面命令会让git迷惑，
    所以对于文件同步用下面命令<span class="token punctuation">(</span>撤销文件修改<span class="token punctuation">)</span>：
    $ git checkout <span class="token operator">--</span> <span class="token operator">&lt;</span>filename<span class="token operator">></span>
<span class="token number">4.</span>新建并切换分支
    $ git checkout <span class="token operator">-</span>b <span class="token operator">&lt;</span>branchname<span class="token operator">></span>
<span class="token number">5.</span>切换到旧的提交版本，commit是表示提交的id
    $ git checkout <span class="token operator">&lt;</span>commit<span class="token operator">></span>
<span class="token number">6.</span>删除分支：
    #先切换到其他分支，无法删除正在使用的分支
      $ git checkout master
    #开始删除本地分支
      $ git branch <span class="token operator">-</span>d mybranch1
    #开始推送删除共享git服务器上分支
      $ git push origin <span class="token operator">:</span>mybranch1
<span class="token number">7.</span>删除远程仓库的分支
      $ git push origin <span class="token operator">--</span><span class="token keyword">delete</span> serverfix
<span class="token number">8.</span>强行删除分支（当分支新增功能而且commit但是没有合并，然后现在不需要这个分支，就需要使用强制删除）
      $ git branch <span class="token operator">-</span>D mybranch1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【commit】：提交文件到Local Repository</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token number">1.</span>提交说明放在命令行执行
    $ git add file<span class="token punctuation">.</span>java
    $ git commit <span class="token operator">-</span>m <span class="token string">"add file.java"</span>
<span class="token number">2.</span>启动文本编辑器以便输入本次提交的说明<span class="token punctuation">(</span>默认会启用 shell 的环境变量 $EDITOR所指定的软件
    $ git commit
<span class="token number">3.</span>所有已经跟踪过的文件暂存起来一并提交<span class="token punctuation">,</span>无需<span class="token punctuation">(</span>$git add file<span class="token punctuation">)</span>命令 
    $ git commit <span class="token operator">-</span>a <span class="token operator">-</span>m <span class="token string">'added new benchmarks'</span>
<span class="token number">4.</span>修改最后一次提交
    # 只修改最后一次提交信息，下面命令会跳出编辑器，修改内容关闭即可
      $ git commit <span class="token operator">--</span>amend
    # 有些文件忘了提交、有些文件忘了删除，需要修改最后一次提交<span class="token punctuation">,</span>这种情况会改变SHA<span class="token operator">-</span><span class="token number">1</span>的值
      $ git add forgotten_file
      $ git rm file
      $ git commit <span class="token operator">--</span>amend<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【diff】：查看任意两棵树的差异</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 查看工作环境与暂存区的差异<span class="token punctuation">(</span>即是未提交的文件<span class="token punctuation">)</span>
    $ git diff
# 暂存区域与你最后提交之间的差异
    $ git diff <span class="token operator">--</span>staged
# 比较两个提交记录的差异
    $ git diff master branchB
#检查空白错误（空格、tab等）
    $ git diff <span class="token operator">--</span>check
# 查看合并后本分支变动了内容
    $ git diff <span class="token operator">--</span>ours
# 查看被合并分支与合并后有哪些不同<span class="token punctuation">(</span><span class="token operator">-</span>b去除空白<span class="token punctuation">)</span>
    $ git diff <span class="token operator">--</span>theirs <span class="token operator">-</span>b
# 查看合并后，合并两个版本各自变动内容
    $ git diff <span class="token operator">--</span>base <span class="token operator">-</span>b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【merge】：合并分支 <ul>
<li>合并某分支(testing)到当前分支(master)： <ol>
<li>使用Fast-forward模式（Git默认模式）：</li>
</ol>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git merge testing
$ git branch <span class="token operator">-</span>d testing
<span class="token number">2.</span> 禁用Fast<span class="token operator">-</span>forward模式（推荐使用此模式，记录所有分支合并情况）：
$ git merge <span class="token operator">--</span>no<span class="token operator">-</span>ff <span class="token operator">-</span>m <span class="token string">"merge with no-ff"</span> testing
<span class="token number">3.</span> 两种模式的区别（左边使用Fast<span class="token operator">-</span>forward，无法知道testing存在过）：<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190730230022.png"/ loading="lazy">



<ul>
<li>合并相关命令：</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 合并时，如果有冲突，用自己分支代码取代冲突代码
       $ git merge <span class="token operator">-</span>Xours branchname
# 合并有冲突，用待合并分支代码取代冲突代码
       $ git merge <span class="token operator">-</span>Xtheirs branchname
#建议使用此方式，留下合并记录
       $ git merge <span class="token operator">--</span>no<span class="token operator">-</span>ff <span class="token operator">-</span>m <span class="token string">"merge with no-ff"</span> <span class="token operator">&lt;</span>mybranch1<span class="token operator">></span>
       $ git merge <span class="token operator">&lt;</span>mybranch1<span class="token operator">></span>
#列出本地仓库，分支前面有<span class="token operator">*</span> 表示是当前使用的分支
       $ git branch
# 列出分支，并且显示每个分支最后一次提交信息
       $ git branch <span class="token operator">-</span>v
# 查看哪些分支已经合并到当前分支
      $ git branch <span class="token operator">--</span>merged
# 查看所有包含未合并工作的分支
      $ git branch <span class="token operator">--</span>no<span class="token operator">-</span>merged
# 合并出现冲突，不想合并了，可以用下面命令撤销：
      $ git merge <span class="token operator">--</span>abort
      或者
      $ git reset <span class="token operator">--</span>hard HEAD<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>合并分支实例：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5d34260824ee">戳我</a></p>
</blockquote>
<ul>
<li>【rebase】：变基，合并分支的一种方式 <ul>
<li>实例：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ce9fefaab751">戳我</a> </li>
</ul>
</li>
<li>【tag】：历史中的某一个提交打上标签，以示重要</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">【轻量标签】很像一个不会改变的分支 <span class="token operator">-</span> 它只是一个特定提交的引用。
【附注标签】是存储在 Git 数据库中的一个完整对象。
<span class="token number">1.</span>打轻量标签，只需要提供标签名
    $ git tag <span class="token operator">-</span>m <span class="token string">"Tag on new commit"</span> mytag2
<span class="token number">2.</span>打附注标签，用<span class="token operator">-</span>a
    $ git tag <span class="token operator">-</span>a v1<span class="token punctuation">.</span><span class="token number">4</span> <span class="token operator">-</span>m <span class="token string">'my version 1.4'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>tag详解：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/95d142b7116d">戳我</a></p>
</blockquote>
<ul>
<li>【rerere】：自动解决冲突</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 定义：
一个隐藏的功能。 正如它的名字 “reuse recorded resolution” 所指，它
允许你让 Git 记住解决一个块冲突的方法，这样在下一次看到相同冲突
时，Git 可以为你自动地解决它。
# 使用场景：
<span class="token number">1.</span>如果你想要保证一个长期分支会干净地合并，但是又不想要一串中间的合并提交将
    rerere 功能打开后偶尔合并，解决冲突，然后返回到合并前。 如果你持续这样做，
    那么最终的合并会很容易，因为 rerere 可以为你自动做所有的事情。
<span class="token number">2.</span>可以将同样的策略用在维持一个变基的分支时，这样就不用每次解决同样的变基冲突了。 
    或者你将一个分支合并并修复了一堆冲突后想要用变基来替代合并 <span class="token operator">-</span> 你可能并不想要再次解决相同的冲突。
<span class="token number">3.</span>当你偶尔将一堆正在改进的特性分支合并到一个可测试的分支时，就像 Git 项目自身经常做的。 
    如果测试失败，你可以倒回合并之前然后在去除导致测试失败的那个特性分支后重做合并，而不用再次重新解决所有的冲突。
# 启用 rerere功能方法：
<span class="token number">1.</span>全局开启<span class="token punctuation">(</span>对所有仓库<span class="token punctuation">)</span>：$ git config <span class="token operator">--</span>global rerere<span class="token punctuation">.</span>enabled <span class="token boolean">true</span>
<span class="token number">2.</span>单个仓库：仓库中创建 <span class="token punctuation">.</span>git<span class="token operator">/</span>rr<span class="token operator">-</span>cache目录即可开启<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>变基实例：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b0607f9ac7ed">戳我</a> </li>
<li>交互式变基：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/71dcbb6ee847">戳我</a> </li>
<li>【fetch】：从远程仓库抓取最新数据 <ul>
<li>当 git fetch命令从服务器上抓取本地没有的数据时，它并不会修改工作目录中的内容。 它只会获取数据然后让你自己合并。</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">  #拉取远程仓库数据
      $ git fetch origin
  #如果origin有其他分支serverfix，那么分支的引用会被拉下来跟本地关联起来，
#但是serverfix分支的代码不会被同步到本地，需要同步使用下面命令：
      $ git checkout <span class="token operator">-</span>b serverfix origin<span class="token operator">/</span>serverfix<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【pull】：拉取远程仓库最新代码，并尝试与本地进行合并</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">git</span> <span class="token expression">pull 在大多数情况下它的含义是一个 git fetch紧接着一个 git merge 命令</span></span>
    $ git pull
# 可以修改pull<span class="token punctuation">.</span>rebase的默认配置
    $ git config <span class="token operator">--</span>global pull<span class="token punctuation">.</span>rebase <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>push：推送本地仓库文件到远程仓库</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">#把master分支修改推送给远程仓库
    $ git push origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>【remote】：管理远程仓库的属性</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 查看远程仓库名称简写
    $ git remote
# 查看更多远程仓库origin的信息
    $ git remote show origin
# 查看远程仓库名称简写和URL
    $ git remote <span class="token operator">-</span>v
    origin  https<span class="token operator">:</span><span class="token comment">//github.com/schacon/ticgit (fetch)</span>
    origin  https<span class="token operator">:</span><span class="token comment">//github.com/schacon/ticgit (push)</span>
# 添加一个新的远程 Git 仓库，同时指定一个你可以轻松引用的简写
    $ git remote add pb https<span class="token operator">:</span><span class="token comment">//github.com/paulboone/ticgit</span>
# 修改一个远程仓库的简写名：pb<span class="token operator">--</span><span class="token operator">></span>paul
    $ git remote rename pb paul
# 移除远程仓库paul
    $ git remote rm paul<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【bundle】：对本地仓库进行打包 <ul>
<li>使用此命令的实例：</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">  【<span class="token number">1</span>】在A机器上打包：
      $ cd R1
      $ git bundle create file<span class="token punctuation">.</span>bundle master
      $ git tag <span class="token operator">-</span>f lastR2bundle master   
【<span class="token number">2</span>】把上面包文件file<span class="token punctuation">.</span>bundle通过u盘拷贝到B机器上，解包
      $ git clone <span class="token operator">-</span>b master <span class="token operator">/</span>home<span class="token operator">/</span>me<span class="token operator">/</span>tmp<span class="token operator">/</span>file<span class="token punctuation">.</span>bundle R2
【<span class="token number">3</span>】修改B机器配置
      cd R2
      nano <span class="token punctuation">.</span>git<span class="token operator">/</span>config
      <span class="token punctuation">[</span>remote <span class="token string">"origin"</span><span class="token punctuation">]</span>
        url <span class="token operator">=</span> <span class="token operator">/</span>home<span class="token operator">/</span>me<span class="token operator">/</span>tmp<span class="token operator">/</span>file<span class="token punctuation">.</span>bundle
        fetch <span class="token operator">=</span> refs<span class="token operator">/</span>heads<span class="token comment">/*:refs/remotes/origin/*
【4】此时A机器又修复了几个bug，再次打包
      $ cd R1
      $ git bundle create file.bundle lastR2bundle..master
      $ git tag -f lastR2bundle master
【5】把A机器新的打包文件拷贝到B机器，覆盖上次file.bundle,然后运行命令更新
      $ cd R2
      $ git pull</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>打包整个分支</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 打包master分支
    $ git bundle create repo<span class="token punctuation">.</span>bundle HEAD master
# 解包，建仓库
    $ git clone repo<span class="token punctuation">.</span>bundle repo
      Initialized empty Git repository in <span class="token operator">/</span><span class="token keyword">private</span><span class="token operator">/</span>tmp<span class="token operator">/</span>bundle<span class="token operator">/</span>repo<span class="token operator">/</span><span class="token punctuation">.</span>git<span class="token operator">/</span>
    $ cd repo
    $ git log <span class="token operator">--</span>oneline
      <span class="token number">9</span>a466c5 second commit
      b1ec324 first commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>打包部分提交：</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 查看maste分支没有提交的版本
    $ git log <span class="token operator">--</span>oneline master <span class="token operator">^</span>origin<span class="token operator">/</span>master
# 打包master分支<span class="token number">9</span>a466c5之后版本（不包括<span class="token number">9</span>a466c5）
    $ git bundle create commits<span class="token punctuation">.</span>bundle master <span class="token operator">^</span><span class="token number">9</span>a466c5
# 确定打包文件是否合法正确（如果打包工具打包是缺少了一个提交）
    $ git bundle verify <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>commits<span class="token punctuation">.</span>bundle
# 查看包的分支情况
    $ git bundle list<span class="token operator">-</span>heads <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>commits<span class="token punctuation">.</span>bundle
      <span class="token number">71</span>b84daaf49abed142a373b6e5c59a22dc6560dc refs<span class="token operator">/</span>heads<span class="token operator">/</span>master
# 导入包文件到other<span class="token operator">-</span>master分支
    $ git fetch <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>commits<span class="token punctuation">.</span>bundle master<span class="token operator">:</span>other<span class="token operator">-</span>master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【log】 <ul>
<li>详情：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bad1f70b6703">戳我</a> </li>
</ul>
</li>
<li>【status】</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 查看当前仓库状态（比较详细）
    $ git status
# 查看当前仓库状态（简略）
    $ git status <span class="token operator">-</span>s
    $ git status <span class="token operator">--</span><span class="token keyword">short</span>
      M README
      MM Rakefile
      A  lib<span class="token operator">/</span>git<span class="token punctuation">.</span>rb
      M  lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb
      <span class="token operator">?</span><span class="token operator">?</span> LICENSE<span class="token punctuation">.</span>txt
    ## <span class="token operator">?</span><span class="token operator">?</span> 表示未跟踪文件
    ## A  表示新添加到暂存区中的文件
    ## MM 第一个M表示修改过的文件而且放入到暂存区，第二个M表示
    ## 修改过的文件<span class="token punctuation">,</span>但是没有添加到暂存区<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【show】：查看Git中不同对象信息 (blobs, trees, tags and commits) <ul>
<li>查看master最后一次commit(下面两个命令等价)</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">git show master
git show <span class="token number">904</span>dc9362ece4c8659af08d3568d39f68d9687d6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>冲突产生时，用此命令生成冲突版本合并前的文件</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">【关于冲突，显示冲突文件】
    # 如果产生冲突了，可以用下面方法恢复冲突版本对应文件
    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Stage <span class="token number">1</span> 是它们共同的祖先版本</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">stage</span> <span class="token expression"><span class="token number">2</span> 是你的版本</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">stage</span> <span class="token expression"><span class="token number">3</span> 来自于 MERGE_HEAD，即你将要合并入的版本（“theirs”）</span></span>
      $ git show <span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span>hello<span class="token punctuation">.</span>rb <span class="token operator">></span> hello<span class="token punctuation">.</span>common<span class="token punctuation">.</span>rb
      $ git show <span class="token operator">:</span><span class="token number">2</span><span class="token operator">:</span>hello<span class="token punctuation">.</span>rb <span class="token operator">></span> hello<span class="token punctuation">.</span>ours<span class="token punctuation">.</span>rb
      $ git show <span class="token operator">:</span><span class="token number">3</span><span class="token operator">:</span>hello<span class="token punctuation">.</span>rb <span class="token operator">></span> hello<span class="token punctuation">.</span>theirs<span class="token punctuation">.</span>rb
    # <span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span>hello<span class="token punctuation">.</span>rb只是查找那个 blob 对象 SHA<span class="token operator">-</span><span class="token number">1</span> 值的简写，
      通过下面命令可以查看到SHA<span class="token operator">-</span><span class="token number">1</span>，用SHA<span class="token operator">-</span><span class="token number">1</span>代替<span class="token number">1</span>
    $ git ls<span class="token operator">-</span>files <span class="token operator">-</span>u
      <span class="token number">100755</span> ac51efdc3df4f4fd328d1a02ad05331d8e2c9111 <span class="token number">1</span> hello<span class="token punctuation">.</span>rb
      <span class="token number">100755</span> <span class="token number">36</span>c06c8752c78d2aff89571132f3bf7841a7b5c3 <span class="token number">2</span> hello<span class="token punctuation">.</span>rb
      <span class="token number">100755</span> e85207e04dfdd5eb0a1e9febbc67fd837c44a1cd <span class="token number">3</span> hello<span class="token punctuation">.</span>rb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【blame】 : 查找文件每一行的提交信息(作者、时间等) <ul>
<li>【-L】查看simplegit.rb的12-15每一行最后一次提交信息（下面^表示的行：是这些行第一次提交并且没有修改过）</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git blame <span class="token operator">-</span>L <span class="token number">12</span><span class="token punctuation">,</span><span class="token number">15</span> simplegit<span class="token punctuation">.</span>rb
      <span class="token operator">^</span><span class="token number">4832f</span><span class="token function">e2</span> <span class="token punctuation">(</span>Scott Chacon  <span class="token number">2008</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">28</span> <span class="token operator">-</span><span class="token number">0700</span> <span class="token number">12</span><span class="token punctuation">)</span>  def <span class="token function">show</span><span class="token punctuation">(</span>tree <span class="token operator">=</span> <span class="token string">'master'</span><span class="token punctuation">)</span>
      <span class="token operator">^</span><span class="token number">4832f</span><span class="token function">e2</span> <span class="token punctuation">(</span>Scott Chacon  <span class="token number">2008</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">28</span> <span class="token operator">-</span><span class="token number">0700</span> <span class="token number">15</span><span class="token punctuation">)</span>
      <span class="token number">9f</span>6560<span class="token function">e4</span> <span class="token punctuation">(</span>Scott Chacon  <span class="token number">2008</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">20</span> <span class="token operator">-</span><span class="token number">0700</span> <span class="token number">16</span><span class="token punctuation">)</span>  def <span class="token function">log</span><span class="token punctuation">(</span>tree <span class="token operator">=</span> <span class="token string">'master'</span><span class="token punctuation">)</span>
      <span class="token number">79</span><span class="token function">eaf55d</span> <span class="token punctuation">(</span>Scott Chacon  <span class="token number">2008</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">08</span> <span class="token operator">-</span><span class="token number">0700</span> <span class="token number">17</span><span class="token punctuation">)</span>     <span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"git log #&#123;tree&#125;"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【-C】查看代码行最原始文件（当文件被拆分，使用此方法查看文件被拆分前的文件信息），</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">#下面查看GITPackUpload<span class="token punctuation">.</span>m的<span class="token number">141</span><span class="token operator">-</span><span class="token number">144</span>行代码行的原始信息（<span class="token operator">-</span>C参数表示查看原始出处）
$ git blame <span class="token operator">-</span>C <span class="token operator">-</span>L <span class="token number">141</span><span class="token punctuation">,</span><span class="token number">144</span> GITPackUpload<span class="token punctuation">.</span>m
      f344f58d GITServerHandler<span class="token punctuation">.</span><span class="token function">m</span> <span class="token punctuation">(</span>Scott <span class="token number">2009</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">141</span><span class="token punctuation">)</span>
      f344f58d GITServerHandler<span class="token punctuation">.</span><span class="token function">m</span> <span class="token punctuation">(</span>Scott <span class="token number">2009</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> gatherObjectShasFromC
      f344f58d GITServerHandler<span class="token punctuation">.</span><span class="token function">m</span> <span class="token punctuation">(</span>Scott <span class="token number">2009</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">143</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token number">70</span>befddd GITServerHandler<span class="token punctuation">.</span><span class="token function">m</span> <span class="token punctuation">(</span>Scott <span class="token number">2009</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">22</span> <span class="token number">144</span><span class="token punctuation">)</span>         <span class="token comment">//NSLog(@"GATHER COMMI</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【bisect】：对你的提交历史进行二分查找，找到有问题的版本 <ul>
<li>情景1：手动测试（查找发现当前版本有bug，想找出bug是在哪一个版本引入的）</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 启动
    $ git bisect start
# 说明当前版本有问题
    $ git bisect bad
# 设定v1<span class="token punctuation">.</span><span class="token number">0</span>版本是没有问题的
    $ git bisect good v1<span class="token punctuation">.</span><span class="token number">0</span>
# 现在可以测试，
    <span class="token number">1.</span>没有问题输入<span class="token operator">:</span>$ git bisect good
    <span class="token number">2.</span>有问题输入：$ git bisect bad
# 继续上面测试这个过程，直到bisect找到第一个有问题版本
# 重置bisect
    $ git bisect reset<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>情景2：自动测试，有个test-error.sh脚本，项目运行正确返回非0，项目运行错误返回0</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 设置bisect有问题版本HEAD和没有问题版本v1<span class="token punctuation">.</span><span class="token number">0</span>
    $ git bisect start HEAD v1<span class="token punctuation">.</span><span class="token number">0</span>
# 开始自动运行测试
    $ git bisect run test<span class="token operator">-</span>error<span class="token punctuation">.</span>sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>【grep】：查找一个函数是在哪里调用或者定义，或者变更历史。</p>
<p>   优点：第一就是速度非常快，第二是你不仅仅可以可以搜索工作目录，还可以搜索任意的 Git 树。 </p>
<ul>
<li>【-n】参数来输出 Git 所找到的匹配行行号</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git grep <span class="token operator">-</span>n gmtime_r
    compat<span class="token operator">/</span>gmtime<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">3</span><span class="token operator">:</span>#undef gmtime_r
    compat<span class="token operator">/</span>gmtime<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">8</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token function">git_gmtime_r</span><span class="token punctuation">(</span>timep<span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    compat<span class="token operator">/</span>gmtime<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span><span class="token function">git_gmtime_r</span><span class="token punctuation">(</span><span class="token keyword">const</span> time_t   <span class="token operator">*</span>timep<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span>result<span class="token punctuation">)</span>
    compat<span class="token operator">/</span>gmtime<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span>     ret <span class="token operator">=</span> <span class="token function">gmtime_r</span><span class="token punctuation">(</span>timep<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    compat<span class="token operator">/</span>mingw<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">606</span><span class="token operator">:</span><span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span><span class="token function">gmtime_r</span><span class="token punctuation">(</span><span class="token keyword">const</span> time_t <span class="token operator">*</span>timep<span class="token punctuation">,</span>   <span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span>result<span class="token punctuation">)</span>
    compat<span class="token operator">/</span>mingw<span class="token punctuation">.</span>h<span class="token operator">:</span><span class="token number">162</span><span class="token operator">:</span><span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span><span class="token function">gmtime_r</span><span class="token punctuation">(</span><span class="token keyword">const</span> time_t <span class="token operator">*</span>timep<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    date<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">429</span><span class="token operator">:</span>             <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">gmtime_r</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>now<span class="token punctuation">,</span> <span class="token operator">&amp;</span>now_tm<span class="token punctuation">)</span><span class="token punctuation">)</span>
    date<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">492</span><span class="token operator">:</span>             <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">gmtime_r</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>time<span class="token punctuation">,</span> tm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    git<span class="token operator">-</span>compat<span class="token operator">-</span>util<span class="token punctuation">.</span>h<span class="token operator">:</span><span class="token number">721</span><span class="token operator">:</span><span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span><span class="token function">git_gmtime_r</span><span class="token punctuation">(</span><span class="token keyword">const</span> time_t <span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    git<span class="token operator">-</span>compat<span class="token operator">-</span>util<span class="token punctuation">.</span>h<span class="token operator">:</span><span class="token number">723</span><span class="token operator">:</span>#define gmtime_r git_gmtime_r<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【–count】输出搜索匹配的文件和匹配的个数</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git grep <span class="token operator">--</span>count gmtime_r
    compat<span class="token operator">/</span>gmtime<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">4</span>
    compat<span class="token operator">/</span>mingw<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">1</span>
    compat<span class="token operator">/</span>mingw<span class="token punctuation">.</span>h<span class="token operator">:</span><span class="token number">1</span>
    date<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">2</span>
    git<span class="token operator">-</span>compat<span class="token operator">-</span>util<span class="token punctuation">.</span>h<span class="token operator">:</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【-p】输出匹配的行是属于哪一个方法或者函数</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git grep <span class="token operator">-</span>p gmtime_r <span class="token operator">*</span><span class="token punctuation">.</span>c
    date<span class="token punctuation">.</span>c<span class="token operator">=</span><span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">match_multi_number</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> num<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>date<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>end<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span>tm<span class="token punctuation">)</span>
    date<span class="token punctuation">.</span>c<span class="token operator">:</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">gmtime_r</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>now<span class="token punctuation">,</span> <span class="token operator">&amp;</span>now_tm<span class="token punctuation">)</span><span class="token punctuation">)</span>
    date<span class="token punctuation">.</span>c<span class="token operator">=</span><span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">match_digit</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>date<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span>tm<span class="token punctuation">,</span> <span class="token keyword">int</span>   <span class="token operator">*</span>offset<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>tm_gmt<span class="token punctuation">)</span>
    date<span class="token punctuation">.</span>c<span class="token operator">:</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">gmtime_r</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>time<span class="token punctuation">,</span> tm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【–and】查看在旧版本 1.8.0 的 Git 代码库中定义了常量名包含 “LINK” 或者 “BUF_MAX” 这两个字符串所在的行</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git grep <span class="token operator">--</span><span class="token keyword">break</span> <span class="token operator">--</span>heading \
    <span class="token operator">-</span>n <span class="token operator">-</span>e <span class="token string">'#define'</span> <span class="token operator">--</span><span class="token operator">and</span> \<span class="token punctuation">(</span> <span class="token operator">-</span>e LINK <span class="token operator">-</span>e BUF_MAX \<span class="token punctuation">)</span> v1<span class="token punctuation">.</span><span class="token number">8.0</span>
    v1<span class="token punctuation">.</span><span class="token number">8.0</span><span class="token operator">:</span>builtin<span class="token operator">/</span>index<span class="token operator">-</span>pack<span class="token punctuation">.</span>c
      <span class="token number">62</span><span class="token operator">:</span>#define <span class="token function">FLAG_LINK</span> <span class="token punctuation">(</span><span class="token number">1u</span><span class="token operator">&lt;&lt;</span><span class="token number">20</span><span class="token punctuation">)</span>
    v1<span class="token punctuation">.</span><span class="token number">8.0</span><span class="token operator">:</span>cache<span class="token punctuation">.</span>h
      <span class="token number">73</span><span class="token operator">:</span>#define S_IFGITLINK  <span class="token number">0160000</span>
      <span class="token number">74</span><span class="token operator">:</span>#define <span class="token function">S_ISGITLINK</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>       <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">&amp;</span> S_IFMT<span class="token punctuation">)</span> <span class="token operator">==</span> S_IFGITLINK<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>找到 ZLIB_BUF_MAX常量是什么时候引入的，我们可以使用 -S选项来显示新增和删除该字符串的提交。</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git log <span class="token operator">-</span>SZLIB_BUF_MAX <span class="token operator">--</span>oneline
    e01503b zlib<span class="token operator">:</span> allow feeding more than <span class="token number">4</span>GB in one go
    ef49a7a zlib<span class="token operator">:</span> zlib can only process <span class="token number">4</span>GB at a time<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>查看 zlib.c文件中git_deflate_bound函数的每一次变更</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git log <span class="token operator">-</span>L <span class="token operator">:</span>git_deflate_bound<span class="token operator">:</span>zlib<span class="token punctuation">.</span>c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>【stash】：用于存储当前工作区域的环境，存储后用git clean工作区 <ul>
<li>【1】使用stash流程，git stash默认存储所有被跟踪的文件(除了Untracked文件)</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">#存储工作区（只存储暂存区的文件），并且清空工作区
  $ git stash
  $ git stash save
#查看工作区，提示已经清理干净
  $ git status
  <span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">On branch master</span></span>
  nothing to commit<span class="token punctuation">,</span> working directory clean
#查看存储了些什么
  $ git stash list
  stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> WIP on master<span class="token operator">:</span> <span class="token number">049</span>d078 added the index file
  stash@<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> WIP on master<span class="token operator">:</span> c264051 Revert <span class="token string">"added file_size"</span>
  stash@<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> WIP on master<span class="token operator">:</span> <span class="token number">21</span>d80a5 added number to log
#恢复最近存储内容，不会恢复暂存区文件
  $ git stash apply
#恢复最近一次存储内容，不会恢复暂存区文件，删除最近一次存储
  $ git stash pop
#指定恢复内容：
  $ git stash apply stash@<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span>
#【<span class="token operator">--</span>index】不经恢复工作区文件，还会恢复暂存区文件
  $ git stash apply <span class="token operator">--</span>index
#删除存储的内容<span class="token punctuation">,</span>删除最近一次的存储
  $ git stash drop stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>
#清除所有存储
  $ git stash clear<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【2】【–keep-index】: 只存储修改过并且没有提交到暂存区的文件（不存储未跟踪和暂存区文件）</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># <span class="token punctuation">(</span>M  index<span class="token punctuation">.</span>html<span class="token punctuation">)</span>中的M表示在暂存区；（M lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb）中的M表示文件被修改但是没有被提交到暂存区；
    $ git status <span class="token operator">-</span>s
      M  index<span class="token punctuation">.</span>html
       M lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb
    $ git stash <span class="token operator">--</span>keep<span class="token operator">-</span>index
      Saved working directory <span class="token operator">and</span> index state WIP on master<span class="token operator">:</span> <span class="token number">1</span>b65b17 added the index file
      HEAD is now at <span class="token number">1</span>b65b17 added the index file
    $ git status <span class="token operator">-</span>s
      M  index<span class="token punctuation">.</span>html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【3】【–include-untracked 或 -u】存储所有已经跟踪的文件(Unmodified、Modified、Staged)和未跟踪的文件（Untracked），除了忽略的文件</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git stash <span class="token operator">-</span>u<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>【4】【–all】存储所有文件（Unmodified、Modified、Staged、Untracked、忽略文件）</li>
<li>【5】【–patch】不储藏所有修改过的文件，但是会交互式地提示哪些改动想要储藏、哪些改动需要保存在工作目录中</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git stash <span class="token operator">--</span>patch
  diff <span class="token operator">--</span>git a<span class="token operator">/</span>lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb b<span class="token operator">/</span>lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb
  index <span class="token number">66</span>d332e<span class="token punctuation">.</span><span class="token number">.8</span>bb5674 <span class="token number">100644</span>
  <span class="token operator">--</span><span class="token operator">-</span> a<span class="token operator">/</span>lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb
  <span class="token operator">++</span><span class="token operator">+</span> b<span class="token operator">/</span>lib<span class="token operator">/</span>simplegit<span class="token punctuation">.</span>rb
  @@ <span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">6</span> <span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span> @@ <span class="token keyword">class</span> <span class="token class-name">SimpleGit</span>
           <span class="token keyword">return</span> `#<span class="token punctuation">&#123;</span>git_cmd<span class="token punctuation">&#125;</span> <span class="token number">2</span><span class="token operator">></span><span class="token operator">&amp;</span><span class="token number">1</span>`<span class="token punctuation">.</span>chomp
         end
       end
  <span class="token operator">+</span>
  <span class="token operator">+</span>    def <span class="token function">show</span><span class="token punctuation">(</span>treeish <span class="token operator">=</span> <span class="token string">'master'</span><span class="token punctuation">)</span>
  <span class="token operator">+</span>      <span class="token function">command</span><span class="token punctuation">(</span><span class="token string">"git show #&#123;treeish&#125;"</span><span class="token punctuation">)</span>
  <span class="token operator">+</span>    end
   end
   test
  Stash <span class="token keyword">this</span> hunk <span class="token punctuation">[</span>y<span class="token punctuation">,</span>n<span class="token punctuation">,</span>q<span class="token punctuation">,</span>a<span class="token punctuation">,</span>d<span class="token punctuation">,</span><span class="token operator">/</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token operator">?</span> y     ##这里确定是否删除##
  Saved working directory <span class="token operator">and</span> index state WIP on master<span class="token operator">:</span> <span class="token number">1</span>b65b17 added the index file<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【6】新建分支恢复储藏</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">【使用场景：】储藏了一些工作，然后继续在储藏的分支上工作，
            如果此时恢复储藏可能会文件冲突，可以新建分支恢复储藏
    $ git stash branch testchanges<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【clean】：清除工作目录中未被追踪的文件；git clean默认不会清除.gitiignore中忽略的文件</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"># 【<span class="token operator">-</span>d】表示删除为被追踪的文件夹以及文件夹内文件
# 【<span class="token operator">-</span>n】表示先看下那些文件要被删除
    $ git clean <span class="token operator">-</span>n <span class="token operator">-</span>d
    Would remove build<span class="token punctuation">.</span>TMP
    Would remove tmp<span class="token operator">/</span>
# 【<span class="token operator">-</span>x】是表示忽略<span class="token punctuation">.</span>gitiignore的规则
    $ git clean <span class="token operator">-</span>n <span class="token operator">-</span>d <span class="token operator">-</span>x
    Would remove build<span class="token punctuation">.</span>TMP
    Would remove test<span class="token punctuation">.</span>o
    Would remove tmp<span class="token operator">/</span>
#【<span class="token operator">-</span>i 或 “interactive”】 表示交互式清除，每个都会询问是否删除
    $ git clean <span class="token operator">-</span>x <span class="token operator">-</span>i
    Would remove the following items<span class="token operator">:</span>
      build<span class="token punctuation">.</span>TMP  test<span class="token punctuation">.</span>o
    <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> Commands <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
        <span class="token number">1</span><span class="token operator">:</span> clean                <span class="token number">2</span><span class="token operator">:</span> filter by pattern    <span class="token number">3</span><span class="token operator">:</span> select by numbers      <span class="token number">4</span><span class="token operator">:</span> ask each             <span class="token number">5</span><span class="token operator">:</span> quit
        <span class="token number">6</span><span class="token operator">:</span> help
    What now<span class="token operator">></span>
#【<span class="token operator">-</span>f】 意味着 <span class="token operator">*</span>强制<span class="token operator">*</span> 或 “确定移除”，移除工作目录中所有未追踪的文件以及空的子目录
    $ git clean <span class="token operator">-</span>f <span class="token operator">-</span>d <span class="token operator">-</span>x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>【reflog】：记录了最近几个月 HEAD 和分支引用所指向的历史；引用日志只存在于本地仓库；克隆仓库时引用日志为空； <ul>
<li>查看引用日志：</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git reflog
<span class="token number">34713</span>b HEAD@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> commit<span class="token operator">:</span> fixed refs handling<span class="token punctuation">,</span> added gc <span class="token keyword">auto</span><span class="token punctuation">,</span> updated
d921970 HEAD@<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> merge phedders<span class="token operator">/</span>rdocs<span class="token operator">:</span> Merge made by recursive<span class="token punctuation">.</span>
<span class="token number">1</span>c002dd HEAD@<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> commit<span class="token operator">:</span> added some blame <span class="token operator">and</span> merge stuff
<span class="token number">1</span>c36188 HEAD@<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> rebase <span class="token operator">-</span><span class="token function">i</span> <span class="token punctuation">(</span>squash<span class="token punctuation">)</span><span class="token operator">:</span> updating HEAD
<span class="token number">95</span>df984 HEAD@<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">:</span> commit<span class="token operator">:</span> # This is a combination of two commits<span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>查看最近五次HEAD指向的提交</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git show HEAD@<span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>查看master分支昨天HEAD指向的提交</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">$ git show master@<span class="token punctuation">&#123;</span>yesterday<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>【submodule】：一个仓库包含另一个仓库 <ul>
<li>详见请见：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/491609b1c426">戳我</a></li>
</ul>
</li>
</ul>
<p>作者：fanlehai</p>
<br>

<h2 id="参考博文："><a href="#参考博文：" class="headerlink" title="参考博文："></a>参考博文：</h2><p>因为有着热心网友的无私分享，故不辞辛苦也将自己的项目或经验整理成博客的形式，也提供给一起大家学习探讨与交流 </p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cd1430161149?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation">三十分钟学会Git</a> </p>
<p><img src="https://raw.githubusercontent.com/touwoyimuli/FigureBed/master/img/20190719175818.png" loading="lazy"></p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">若文章有所感所获，亦可请我共饮一杯肥宅冰阔落；</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200701013332.png"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200701013332.png" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200701013449.png"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200701013449.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200701013628.png"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200701013628.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>偕臧</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://ifmet.cn/posts/fd870c38/" title="三十分钟学会Git（写的挺好的一篇）">https://ifmet.cn/posts/fd870c38/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/8eca9061/" rel="prev" title="make、makefile、cmake、qmake都是什么？有什么区别？"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">make、makefile、cmake、qmake都是什么？有什么区别？</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/f4f9a4a9/" rel="next" title="`git`入门基础命令（小白到团队开发所需掌握的基本命令）"><span class="post-nav-text">`git`入门基础命令（小白到团队开发所需掌握的基本命令）</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span></span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"j1ERzyBCVwKtzx1t7EOv5ur8-MdYXbMMI","appKey":"EuraMPDEgt5G8iLWSNrkQ49n","placeholder":"不同的观点和想法相遇，促进彼此的成长，当然，这里也可以俏皮一下 (´・ω・`) ~~~ (填写邮箱可以收到回复)","avatar":"wavatar","pageSize":10,"visitor":true,"highlight":true,"recordIP":true,"enableQQ":true,"meta":["nick","mail","link"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/posts/fd870c38/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">鄂ICP备2021002780号</a></div><div class="copyright"><span>&copy; 2019 – 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 偕臧</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.4.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.5.2</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2019-06-09T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div><script>const date = new Date();
const today = (date.getMonth() + 1) + "-" + date.getDate()
const mourn_days = ["4-4"]
if (mourn_days.includes(today)) {
  document.documentElement.style.filter = "grayscale(1)";
}</script></div></body></html>